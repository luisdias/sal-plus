/*
        Easybox v1.3 - Lightweight easy to use lightbox clone for jQuery
        Based on Slimbox2 by Christophe Beyls <http://www.digitalia.be>
*/
(function(b){b(function(){b.easybox.resourceHandler({identify:function(a){return a.url?!0:!1},postLoad:function(a){a.obj=b('<iframe width="'+a.width+'" height="'+a.height+'" src="'+a.url+'" frameborder="0"></iframe>')[0]}});b.easybox.resourceHandler({identify:function(a){return a.html?!0:!1},postLoad:function(a){a.obj=b('<div style="width:'+a.width+"px;height:"+a.height+'px">'+a.html+"</div>")[0]}});b.easybox.resourceHandler({identify:function(a){if(!a.url)return!1;var c=/^(.*)\#([A-Za-z0-9\-_]*)$/i.exec(a.url);
return null!=c&&b("#"+c[2]).length?(a.id=c[2],!0):!1},preLoad:function(a,c){var d=b("#"+a.id)[0];d?(a.width=a.width||b(d).width(),a.height=a.height||b(d).height(),a.obj=d):a.error=!0;c()},postLoad:function(a){a.parent=b(a.obj).parent()[0];a.display=b(a.obj).css("display")},show:function(a){b(a.obj).css("display","block")},hide:function(a){b(a.parent).append(b(a.obj).css("display",a.display))}});b.easybox.resourceHandler({identify:function(a){return!a.url?!1:/(\.jpg|\.jpeg|\.png|\.gif)$/i.test(a.url)},
preLoad:function(a,b){var d=new Image;d.onload=function(){a.width=a.width||this.width;a.height=a.height||this.height;b()};d.onerror=function(){a.error=!0;b()};d.src=a.url},postLoad:function(a){a.obj=b('<img src="'+a.url+'" style="display:block;width:'+a.width+"px;height:"+a.height+'px" alt="'+a.caption+'" />')[0]}});b.easybox.resourceHandler({identify:function(a){return!a.url?!1:/(\.mpg|\.mpeg|\.mp4|\.ogv|\.webm|\.flv)$/i.test(a.url)},postLoad:function(a){a.obj=b('<div style="overflow:hidden;width:'+
a.width+"px;height:"+a.height+'px" />')[0]},show:function(a){var c=!!b.fn.flowplayer;b(a.obj).append(b('<video src="'+a.url+'" width="'+a.width+'" height="'+a.height+'"'+(!c?' controls="controls"':"")+" />"));c&&b(a.obj).flowplayer()}});b.easybox.resourceHandler({identify:function(a){if(!a.url)return!1;var b=/^http\:\/\/www\.youtube\.com\/watch\?v=([A-Za-z0-9\-_]*)(&(.*))?$/i.exec(a.url);return null!=b?(a.id=b[1],!0):!1},preLoad:function(a,c){b.ajax("http://gdata.youtube.com/feeds/api/videos/"+a.id+
"?v=2&alt=jsonc",{type:"GET",dataType:"jsonp",timeout:2E3,error:function(b,e){if("abort"!=e)a.error=!0,c()},success:function(b){!b.error&&b.data&&"allowed"==b.data.accessControl.embed?(b="widescreen"==b.data.aspectRatio,a.height=a.height||720,a.width=Math.round(a.height*(b?16/9:4/3))):a.error=!0;c()}})},postLoad:function(a){a.obj=b('<iframe src="http://www.youtube.com/embed/'+a.id+'?version=3&autohide=1&autoplay=1&rel=0" width="'+a.width+'" height="'+a.height+'" frameborder="0"></iframe>')[0]}});
b.easybox.resourceHandler({identify:function(a){if(!a.url)return!1;var b=/^http\:\/\/vimeo\.com\/([0-9]*)(.*)?$/i.exec(a.url);return null!=b?(a.id=b[1],!0):!1},preLoad:function(a,c){b.ajax("http://vimeo.com/api/v2/video/"+a.id+".json",{type:"GET",dataType:"jsonp",timeout:2E3,error:function(b,e){if("abort"!=e)a.error=!0,c()},success:function(b){if(b.length)if("anywhere"==b[0].embed_privacy||"approved"==b[0].embed_privacy){if(b[0].width&&b[0].height)a.width=b[0].width,a.height=b[0].height}else a.error=
!0;c()}})},postLoad:function(a){a.obj=b('<iframe src="http://player.vimeo.com/video/'+a.id+'?title=0&byline=0&portrait=0&autoplay=true" width="'+a.width+'" height="'+a.height+'" frameborder="0"></iframe>')[0]}});b.easybox.resourceHandler({identify:function(a){if(!a.url)return!1;var b=/^http\:\/\/www\.dailymotion\.com\/video\/([A-Za-z0-9]*)(.*)?$/i.exec(a.url);return null!=b?(a.id=b[1],!0):!1},preLoad:function(a,c){b.ajax("https://api.dailymotion.com/video/"+a.id+"?fields=allow_embed,aspect_ratio",
{type:"GET",dataType:"jsonp",timeout:2E3,error:function(b,e){if("abort"!=e)a.error=!0,c()},success:function(b){b.allow_embed?(b=b.aspect_ratio,a.height=a.height||720,a.width=Math.round(a.height*b)):a.error=!0;c()}})},postLoad:function(a){a.obj=b('<iframe src="http://www.dailymotion.com/embed/video/'+a.id+'?autoplay=1" width="'+a.width+'" height="'+a.height+'" frameborder="0"></iframe>')[0]}})})})(jQuery);
